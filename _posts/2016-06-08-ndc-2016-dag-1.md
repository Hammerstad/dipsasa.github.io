---
layout: post
title:  NDC 2016 Dag 1
author: [roh, anm]
tags: [Arkitektur]
---
NDC i Oslo er alltid et av årets høydepunkter som utvikler i Norge. I år er intet unntak. Programmet er innholdsrikt og variert, og som alltid er det vanskelig å velge hva man skal gå på. Under er korte sammendrag av sesjonene vi valgte oss ut. Skal garantert se en del fler som video når de blir lagt ut senere.

<!--more-->

## Versions Are Evil - Sebastien Lambla

Versjonering blir brukt for endringskontroll. Målet er å ikke bryte eksisterende klienter. Flere versjoner muliggjør endring av klient og server hver for seg. Versjonen er også et godt utgangspunkt for dokumentasjon og kan brukes for kommunisere endringer med andre utviklere.

Hvordan kan vi få fordelene ved versjonering uten å faktisk lage nye versjoner?

En vanlig versjoneringsstrategi er å slenge på en versjonsslug som en del av API-adressen eller domenet. Dermed får klientene flere URI-er å forholde seg til. Det er krevende å vedlikeholde flere versjoner av API-et samtidig, så dersom man bruker en gammel versjon av API-et, vær forberedt på endring. Eksempel fra Github som er på versjon 3 av sitt API, klienter mot de to tidligere versjonene fungere ikke lenger. Dersom de ikke blir oppdatert, vil de aldri igjen funke. Dermed har en sterk kobling mellom klienten og API-et den konsumerer. 

Løsningen er å bruke versjonering sjeldnere, men å endre API-et på en kontrollert måte. Noen enkle (på papiret) teknikker kan brukes: 

- *Bakoverkompatabilitet:* en nyere versjon av systemet skal fortsatt fungere med input generert av en eldre versjon av systemet.
- *Framoverkompatabilitet:* en eldre versjon av systemet forstår input fra en nyere versjon av systemet ved å ignorere det den ikke forstår.
- *Don't Validate Schemas:* Valider kun det systemet trenger for å gjennomføre sin businesslogikk.

Ikke bryt APIet kun av kosmetiske grunner. Dårlige navn er ofte mindre kostbart enn brytende endringer.

Selv om man lager levende API-er, trenger man en måte å fjerne gammel kode på en kontrollert måte. Dersom man bare legger til, fører det til for store og tunge kodebaser. Et eksempel fra nettleserverdenen er å telle hvor ofte de forskjellige versjonene av HTML-standarden blir brukt. Dette kan samles opp sentralt, og etter en stund får man god data på bruksmønstrene . Etter hvert som eldre versjoner faller i popularitet, blir det til slutt veldig billig å slette bitene som ikke lenger brukes. Dette kan videreføres til alle API-er, så lenge man lager telemetri. Telemetri er uansett en god idè, så enklere migrering er en bonus.

### Konklusjon

Versjonering må brukes varsomt og gjennomtenkt. Det løser en del problemer, men kommer med en kostnad. Flere teknikker kan benyttes for å utsette versjonering så lenge som mulig.




